changelog-rev16.3 [ révision : 46 - jpb /14-05-2021 ]
(non exhaustif...)
pour des informations complètes et détaillées visitez : https://github.com/npds/npds_dune/compare/v.16.2.1...master

- Corrections et améliorations
   - travaux sur les traductions :
      ipban, npds_twi, /admin, contact, manuels admin
   - [bug] création et modification groupe
   - compatibilité mysql>5 : lnl
   - compatibilité mysql8 : (mot réservé rank) comment/reply.php
   - compatibilité php>7.4 :
      ordre des arguments implode() (savemysql.php, upload.func.forum.php)
      deprecated/removed get_magic_quotes_runtime() set_magic_quotes_runtime() (grab_globals.php)
   - lib mysql : arguments
   - notice(s) et fonctionnement sur les affichages des contributions des anciens membres
   - cohérence ancre et urls last-post => lastpost
   - oubli de tin class pour tinymce dans filemanager.php
   ...

- Evolutions
   - Nouveau système de cryptage des mots de passes :
   Suite au(x) notice(s) dues à l'évolution de la fonction crypt() voici donc la ré-implémentation du système de cryptage et par conséquence des différents login. 
   Cette ré-implémentation délicate a de plus corrigé d'autres problèmes sporadiques liés au contenu des mots de passe. Elle a été orientée pour que ce soit totalement transparent pour le webmaster et les utilisateurs donc sans campagne de remise à jour des mots de passe. En cas de nouveau site recevant des anciennes données avec donc les mdp en clair ou cryptés avec l'ancien système les mdp seront donc analysés et crypté avec le nouveau système systématiquement au fur et à mesure des connections des utilisateurs ou des administrateurs. 
   Les obscures options de cryptage des mots de pass ($system et $system_md5) ont été désimplémentées.
   
   - alertes et message provenant de npds
   Finalisation de l'implémentation des fonctions d'envoi de message et alerte (version, sécurité, note) provenenant de npds dans les portails et de la gestion de leur lecture par les superadministrateurs.

- Documentation
   - manuels admin (still on work)

-Dépendances
   - fontawesome update to 5.15.2

changelog-rev16.2.1 [ révision : 45 - jpb /06-03-2021 ]

- Corrections
   patch sécurité ghostform
   notices sur view topics
   Evolution
   icone d'alerte admin pour modules (implémentation)

changelog-rev16.2 [ révision : 44 - jpb /28-02-2021 ]
(non exhaustif...)
pour des informations complètes et détaillées visitez : https://github.com/npds/npds_dune/compare/v16.1...master

- Evolutions
   - full utf8 support (utf8mb4)
   - passage du core en français
   - consolidation support IP V4 V6
   - file and pic manager skinable
   - emojipopover (utilisation des emoji dans forums, chat, comment and more)
   - mysqli par defaut dans config.php

- Corrections et améliorations : suite au retour dans forums et tests (ou pas)
   - iconographie : correction classes suite maj fontawesome 5
   - geoloc : meilleur support fullscreen
   - support IPV6 : consolidation implémentation ipban, chat
   - notice php : filemanager, header.php, banner.php, index.php
   - edito : date trop ancienne ...
   - upload admin image oubliée ...
   - responsive image dans impression des articles des sections
   - carnet.php mise en page ...
   - RGPD consolidation dans critique
   - fusion des tables mainblock et adminblock dans la base
   - correction raccourcissement de certaine clef primaire (char) devenu trop longue avec le nouvel encodage utf8mb4

- Mises à jour des libs externes :
   - bootstrap 4.5 + skins
   - tinymce 5.4
   - openlayers 6.5.0
   - tarteaucitron 1.8.1


changelog-rev16.1 [ révision : 40 - jpb /14-5-2020 ]
(non exhaustif...)
pour des informations complètes et détaillées visitez : https://github.com/npds/npds_dune/compare/v16.0...master

- Corrections suite au retour dans forums et tests
   - dysfonctionnement  de la mise à jour des réseaux sociaux en admin
   - dysfonctionnement  de la mise à jour des groupes en admin
   - boutons non fonctionnels dans l'édition des fichiers de configuration en admin
   - type de valeur incompatible avec mysql > 5 dans newsletter en admin
   - contrôles dans la gestion des sections en admin
   - attribution des droits sur les blocs défaillant en admin
   - absence d'affichage des sujet dans submit.php
   - calcul de la taille des fichiers dans download.php
   - ajout de possibilité d' url locale dans contrôle formulaire dans installation auto #493 


-  Evolutions
   - interface admin pour configuration upload
   - ajout d'extension de  types de fichier
   - bannissement de plage d'adresse ip en V4 (dans ipban) admin ...
   - RGPD ajout fichier politique confidentialité  liens  et case à cocher d'acceptation dans formulaires ...
   - revisite du process de choix et de contrôle des avatar perso
   - augmentation de la longueur des champs url du module link dans les formulaires et dans la base 

- Doc
  - mise à jour des manuels admins ...(en cours)

- Mises à jour des libs externes :
  -  fontawesome 5
  -  tinymce 5
  -  bootbox 5.4
  -  formvalidation 1.5.0
  -  tarteaucitron
  -  openlayer
  -  jquery 3.5
  -  bootstrap 4.5


changelog-rev16.0  [ révision : 39 - jpb /13-12-2019 ]

Depuis une version 13 voici les principaux changements.

Implémentations majeures impactant sur tout le portail :
- intégration en backend d'un framework : Bootsrap 4 #requis
   ayant pour conséquence :
      intégration de Jquery 3.x (implémentation)  #requis
      abandon de la librairie YUI (désimplémentation)
 
- intégration des webfont fontawesome version courante (free) :
   (soutien et remplacement de l'iconographie du cms) #requis
- abandon de la librairie toggle-div (désimplémentation)
- responsive design
   réécriture de presque TOUS les fichiers du portail (suppression des mise en pages tabulaires) et implémentation de classes (pour grilles/grid) ces classes sont celles de bootstrap4 MAIS elle peuvent très bien se comporter comme des classes génériques à cloner ou modifier en cas de changement de framework..) 
 
## ==> ADMINISTRATION

- passage en full utf-8
   tous les fichiers (script et langue) sont en utf-8 : la sortie des fichiers langues est donc en utf-8 transformé si nécessaire en entités html
- nouveaux système de droits appliqué au fonctions
   stockage des fonctions et des droits dans 2 nouvelles tables de la bd
   abandon du mécanisme géré par extend-modules.txt 
   administration des modules recentralisé pour profiter de la puissance du nouveau système de droits aux fonctions 
      modification des entêtes des fichiers admin des modules (inclusion de la fonction qui gère les droits)
      modification des fichiers install_conf des modules avec install auto et admin qui doivent envoyer une requête d'identification à la table fonctions
- système d'alerte/notification de tache d'administration :
   centralisé et disponible dans le bloc admin
- contrôle des serveurs mails :
   lors des entrées d'adresse email dans le portail
   en admin possibilité de contrôler toutes les adresses mails des utilisateurs déjà stockées. En cas de défaut l'utilisateur sera prévenu (MP) toutes les ressources envoyant des emails vers cette adresse seront suspendues.

## <== ADMINISTRATION
 
Corrections :
- lib mysqli
   ajout de la connection persistante et globalisation de $dblink dans la fonction sql_connect() car variable non disponible dans certain contexte (install auto)
   correction fonction sql_num_fields (utilisée dans savemysql)
- lib mysql
   # ajout des fonctions clones de (mysql || mysqli_select_db)

- bug (Rev13) état de l'icône témoin de connection ne fonctionnait pas dans les blocs groupes
- bug (Rev13)  headlines  (la lib feed creator avait changé mais pas la construction du bloc headline) 
  lib/feedcreator.class.php (corrections conformité dans la lib ATOM) 
 dans backend.php 
 dans admin/headlines.php (remove la suppression des espace avant entrée dans bd) 
 dans mainfile.php (fonction headline) 
 rajout de la possibilité d'avoir un titre de bloc human readable ...) par la modification du système de création de nom des fichier.cache qui était basée sur un nom compatible de fichier (...sans espace) 


Evolutions 

Installation automatique de modules :
- install auto en v.1.2
   - utilisation des lib (mysql ou mysqli) pour support php7
   - ajout support langue espagnol
   - compatibilité php7 (ereg=>preg)
   - option d'installation rapide
   - interface
   - désinstallation automatique (prototype)

- intégration côté client d'un contrôle des form
   utilisation de formValidation

- suppression des commentaires relatifs à un sondage quand on supprime le sondage. 
- chargement de footer_after.inc à partir du thème
modification du fichier footer.php pour pouvoir charger (comme pour les modules) si il existe le fichier footer_after.inc ceci permet de placer ici les js (...de second niveau) nécessaires ==> chargement plus rapide de la page 

## ==> THEMES
- 8 themes disponibles dont 3 "skinable" (22 skins)
   ce qui donne donc 74 visualisations différentes du portail possible 

- Implémentation des skins de Thème pour l'utilisateur et l'administrateur
   un theme skinable doit avoir le suffixe _sk
   les feuilles de style doivent se trouver dans le dossier themes/_skins/'monskin'/bootstrap.min.css
   un theme et toute son infrastructure peut donc supporter les skins

modules/include/header_head.inc ==> [chargement du framework en backend avec CSS par defaut]
===>
si l'utilisateur choisit un skin dans header.php on remodifie le(s) lien(s) CSS relatif au Framework en lui appliquant deux css du framework customisé (bootstrap.min.css, extra.css)

- note :
   on peut maintenant avoir des dossiers thèmes non visible par les utilisateurs (pour travaux et désactivation) pour désactiver il suffit de faire précéder le nom du dossier theme par _

- ajout d'une landing page : 
   offre la possibilité d'avoir un header.html alternatif sur la page d'accueil (défini pour le site), par l'ajout d'un fichier themes/montheme/html/header_landing.html , si ce fichier existe alors il sera chargé pour la page d'accueil en lieu et place du header.html.
## <== THEMES

## ==> SUPPORT DES LANGUAGES
- Support compatibilité PHP 7.x
   chasse au notice php (undefined variable, undefined offset, ...)
   correction des fichiers où le nom d'une classe est identique à celui d'une fonction de cette classe
   correction des preg utlisant le flag '##'e remplacement par callback
   correction de new topic.php (encadrement des codes d'erreur forum par des simple quote) 
   correction de la lib file.class.php (incompatible avec PHP7 objet incompatible?...)
   correction de toutes les utilisation de each (big work)
   correction des argument de définition des constantes
   correction admin/banners.php
      lignes 387 et 431 de admin/banners.php (REV 13) 
      la variable $extrainfo est doublée dans les liste d'arguments de la fonction BannerClientChange() === page blanche !!!! 
   correction modules/links/links-1.php 
      ligne 101 (REV 13) 
      la variable $name deux fois dans les arguments de fonction Add() 
      === page blanche 
    correction modules/links/links.php 
      ligne 544 (REV 13) 
      la variable $name deux fois dans les arguments de fonction Add() 

- Support compatibilité MYSQL 5.7 +
   modification de certaine valeur par default dans la bd
   modification dans les fichiers de requêtes où le type de valeur ne correspond pas à celui attendu dans la base ... 
   typage precis des entrées dans la bd en fonctions des types définis dans la bd : (on manque encore de test ...)

- Support IPV6
   pour session log anti spam banIP etc ... 
   (reste à traiter le cas des adresse IPV4 encapsulé dans une IPV6)
## <== SUPPORT DES LANGUAGES

- Tinymce 
   version courante
   adaptation de l'implémentation
   ajout de commande pour les métamots
   modification des templates (responsives)

## ==> DIVERS
- Remplacement des licences GNU GPL de version 2 par la version 3
## <== DIVERS

## ==> RGPD
- intégration d'un outil de consentement des services utilisés et des cookies déposés par ces services (tarteaucitron)
## <== RGPD

## ==> GEOLOC
inclusion dans le core du module de géolocalisation
## <== GEOLOC

## ==> INSIDE CODE
   mise en majuscule des instruction mySQL
   écriture à double indentation (3 espaces) PHP / html / js
   généralisation des simple quotes (le plus souvent)
   augmentation de la longueur des chaines de sorties réduction des concaténations courtes.
   ecriture des js avec le support de jquery ou en js pur
## <== INSIDE CODE
