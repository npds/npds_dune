INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('!anti_spam!', 'function MM_anti_spam ($arg) {\n   return("<a href=\\"mailto:".anti_spam($arg, 1)."\\" target=\\"_blank\\">".anti_spam($arg, 0)."</a>");\n}', 'meta', '-', NULL, '[french]Encode un email et cr&eacute;e un &lta href=mailto ...&gtEmail&lt/a&gt[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('!search_topics!', 'function MM_search_topics() {\n   global $NPDS_Prefix;\n\n   $MT_search_topics="<form action=\\"search.php\\" method=\\"post\\"><label class=\\"col-form-label\\">".translate("Sujets")." </label>";\n   $MT_search_topics.="<select class=\\"form-select\\" name=\\"topic\\"onChange=''submit()''>" ;\n   $MT_search_topics.="<option value=\\"\\">".translate("Tous les sujets")."</option>\\n";\n\n   $rowQ=Q_select("select topicid, topictext from ".$NPDS_Prefix."topics order by topictext", 86400);\n   foreach($rowQ as $myrow) {\n     $MT_search_topics.="<option value=\\"".$myrow[''topicid'']."\\">".aff_langue($myrow[''topictext''])."</option>\\n";\n   }\n   $MT_search_topics.="</select></form>";\n   return ($MT_search_topics);\n}', 'meta', '-', NULL, '[french]Liste des Topic => Moteur de recherche interne (Combo)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('leftblocs', 'function MM_leftblocs($arg) {\n   ob_start();\n      leftblocks($arg);\n      $M_Lblocs=ob_get_contents();\n   ob_end_clean();\n   return ($M_Lblocs);\n}', 'meta', '-', NULL, '[french]Fabrique tous les blocs de gauche[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('rightblocs', 'function MM_rightblocs($arg) {\n   ob_start();\n      rightblocks($arg);\n      $M_Lblocs=ob_get_contents();\n   ob_end_clean();\n   return ($M_Lblocs);\n}', 'meta', '-', NULL, '[french]Fabrique tous les blocs de droite[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('!list_mns!', 'function MM_list_mns() {\n   global $NPDS_Prefix;\n\n   $query=sql_query("SELECT uname FROM ".$NPDS_Prefix."users WHERE mns=''1''");\n   $MT_mns="<ul class=\\"list-group list-group-flush\\">";\n   while (list($uname)=sql_fetch_row($query)) {\n      $MT_mns.="<li class=\\"list-group-item\\"><a href=\\"minisite.php?op=$uname\\" target=\\"_blank\\">$uname</a></li>";\n   }\n   $MT_mns.="</ul>";\n   return ($MT_mns);\n}', 'meta', '-', NULL, '[french]Affiche une liste de tout les membres poss&eacute;dant un minisite avec un lien vers ceux-ci[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('!mailadmin!', '$cmd="<a href=\\"mailto:".anti_spam($GLOBALS[''adminmail''], 1)."\\" target=\\"_blank\\">".anti_spam($GLOBALS[''adminmail''], 0)."</a>";', 'meta', '-', NULL, '[french]Affiche un lien vers l''adresse mail de l''administrateur.[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('!login!', 'function MM_login() {\r\n   $boxstuff = ''\r\n   <div class="card card-body m-3">\r\n      <h3><a href="user.php?op=only_newuser" role="button" title="''.translate("Nouveau membre").''"><i class="fa fa-user-plus"></i>&nbsp;''.translate("Nouveau membre").''</a></h3>\r\n   </div>\r\n   <div class="card card-body m-3">\r\n      <h3><i class="fas fa-sign-in-alt fa-lg"></i>&nbsp;''.translate("Connexion").''</h3>\r\n      <form action="user.php" method="post" name="userlogin">\r\n         <div class="mb-3 row">\r\n            <label for="inputuser" class="form-label col-sm-4">''.translate("Identifiant").''</label>\r\n            <div class="col-sm-8">\r\n               <input type="text" class="form-control" name="uname" id="inputuser" placeholder="''.translate("Identifiant").''">\r\n            </div>\r\n         </div>\r\n         <div class="mb-3 row">\r\n            <label for="inputPassuser" class="form-label col-sm-4">''.translate("Mot de passe").''</label>\r\n            <div class="col-sm-8">\r\n               <input type="password" class="form-control" name="pass" id="inputPassuser" placeholder="''.translate("Mot de passe").''">\r\n               <span class="help-block small"><a href="user.php?op=forgetpassword" role="button" title="''.translate("Vous avez perdu votre mot de passe ?").''">''.translate("Vous avez perdu votre mot de passe ?").''</a></span>\r\n            </div>\r\n         </div>\r\n         <input type="hidden" name="op" value="login" />\r\n         <div class="mb-3 row">\r\n         <div class="col-sm-8 ms-sm-auto">\r\n            <button class="btn btn-primary" type="submit" title="''.translate("Valider").''">''.translate("Valider").''</button>\r\n         </div>\r\n         </div>\r\n      </form>\r\n   </div>'';\r\n   return ($boxstuff);\r\n}', 'meta', '-', NULL, '[french]Affiche les champs de connexion au site.[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('admin_infos', 'function MM_admin_infos($arg) {\n   global $NPDS_Prefix;\n\n   $arg = arg_filter($arg);\n   $rowQ1 = Q_select ("SELECT url, email FROM ".$NPDS_Prefix."authors WHERE aid=''$arg''", 86400);\n   $myrow=$rowQ1[0];\n   if ($myrow[''url''] !='''') {\n      $auteur="<a href=\\"".$myrow[''url'']."\\">$arg</a>";\n   } elseif ($myrow[''email''] !='''') {\n      $auteur="<a href=\\"mailto:".$myrow[''email'']."\\">$arg</a>";\n   } else {\n      $auteur=$arg;\n   }\n   return ($auteur);\n}', 'meta', '-', NULL, '[french]Affiche le Nom ou le WWW ou le Mail de l''administrateur / syntaxe : admin_infos(nom_de_admin)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('top_stories', 'function MM_top_stories ($arg) {\r\n   $content='''';\r\n   $arg = arg_filter($arg);\r\n   $xtab=news_aff("libre","ORDER BY counter DESC LIMIT 0, ".$arg*2,0,$arg*2);\r\n   $story_limit=0;\r\n   while (($story_limit<$arg) and ($story_limit<sizeof($xtab))) {\r\n      list($sid, $catid, $aid, $title, $time, $hometext, $bodytext, $comments, $counter) = $xtab[$story_limit];\r\n      $story_limit++;\r\n      if($counter>0) {\r\n        $content.=''<li class="ms-4 my-1"><a href="article.php?sid=''.$sid.''" >''.aff_langue($title).''</a>&nbsp;<span class="badge bg-secondary float-end">''.wrh($counter).'' ''.translate("Fois").''</span></li>'';\r\n     }\r\n   }\r\n   return($content);\r\n}', 'meta', '-', '', '[french]Affiche le titre et un lien sur les Top x articles / syntaxe : top_stories(x)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('top_commented_stories', 'function MM_top_commented_stories ($arg) {\r\n   $content='''';\r\n   $arg = arg_filter($arg);\r\n   $xtab=news_aff("libre","ORDER BY comments DESC  LIMIT 0, ".$arg*2,0,$arg*2);\r\n   $story_limit=0;\r\n   while (($story_limit<$arg) and ($story_limit<sizeof($xtab))) {\r\n      list($sid, $catid, $aid, $title, $time, $hometext, $bodytext, $comments) = $xtab[$story_limit];\r\n      $story_limit++;\r\n      if($comments>0) {\r\n         $content.= ''<li class="ms-4 my-1"><a href="article.php?sid=''.$sid.''" >''.aff_langue($title).''</a>&nbsp;<span class="badge bg-secondary float-end">''.wrh($comments).''</span></li>'';\r\n      }\r\n   }\r\n  return($content);\r\n}', 'meta', '-', '', '[french]Affiche le titre et un lien sur les Top x articles les plus comment&eacute;s / syntaxe : top_commented_stories(x)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('top_categories', 'function MM_top_categories($arg) {\r\n   global $NPDS_Prefix;\r\n   $content='''';\r\n   $arg = arg_filter($arg);\r\n   $result = sql_query("select catid, title, counter from ".$NPDS_Prefix."stories_cat order by counter DESC limit 0,$arg");\r\n   while (list($catid, $title, $counter) = sql_fetch_row($result)) {\r\n      if ($counter>0) {\r\n         $content.= ''<li class="ms-4 my-1"><a href="index.php?op=newindex&amp;catid=''.$catid.''" >''.aff_langue($title).''</a>&nbsp;<span class="badge bg-secondary float-end">''.wrh($counter).''</span></li>'';\r\n      }\r\n   }\r\n   sql_free_result($result);\r\n   return($content);\r\n}', 'meta', '-', '', '[french]Affiche le titre et un lien sur les Top x cat&eacute;gories des articles / syntaxe : top_categories(x)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('top_sections', 'function MM_top_sections ($arg) {\r\n   global $NPDS_Prefix;\r\n   $content='''';\r\n   $arg = arg_filter($arg);\r\n   $result = sql_query("SELECT artid, title, counter FROM ".$NPDS_Prefix."seccont ORDER BY counter DESC LIMIT 0,$arg");\r\n   while (list($artid, $title, $counter) = sql_fetch_row($result)) {\r\n      $content.=''<li class="ms-4 my-1"><a href="sections.php?op=viewarticle&amp;artid=''.$artid.''" >''.aff_langue($title).''</a>&nbsp;<span class="badge bg-secondary float-end">''.wrh($counter).'' ''.translate("Fois").''</span></li>'';\r\n   }\r\n   sql_free_result($result);\r\n   return($content);\r\n}', 'meta', '-', '', '[french]Affiche le titre et un lien sur les Top x articles des rubriques / syntaxe : top_sections(x)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('top_reviews', 'function MM_top_reviews ($arg) {\r\n   global $NPDS_Prefix;\r\n   $content='''';\r\n   $arg = arg_filter($arg);\r\n   $result = sql_query("SELECT id, title, hits FROM reviews ORDER BY hits DESC LIMIT 0,$arg");\r\n   while (list($id, $title, $hits) = sql_fetch_row($result)) {\r\n      if ($hits>0) {\r\n         $content.= ''<li class="ms-4 my-1"><a href="reviews.php?op=showcontent&amp;id=''.$id.''" >''.$title.''</a>&nbsp;<span class="badge bg-secondary float-end">''.wrh($hits).'' ''.translate("Fois").''</span></li>'';\r\n      }\r\n   }\r\n   sql_free_result($result);\r\n   return($content);\r\n}', 'meta', '-', '', '[french]Affiche le titre et un lien sur les Top x des critiques / syntaxe : top_reviews(x)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('top_authors', 'function MM_top_authors ($arg) {\r\n   global $NPDS_Prefix;\r\n   $content='''';\r\n   $arg = arg_filter($arg);\r\n   $result = sql_query("SELECT aid, counter FROM authors ORDER BY counter DESC LIMIT 0,$arg");\r\n   while (list($aid, $counter) = sql_fetch_row($result)) {\r\n      if ($counter>0) {\r\n         $content.= ''<li class="ms-4 my-1"><a href="search.php?query=&amp;author=''.$aid.''" >''.$aid.''</a>&nbsp;<span class="badge bg-secondary float-end">''.wrh($counter).''</span></li>'';\r\n      }\r\n   }\r\n   sql_free_result($result);\r\n   return($content);\r\n}', 'meta', '-', '', '[french]Affiche le titre et un lien sur les Top x des auteurs / syntaxe : top_authors(x)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('top_polls', 'function MM_top_polls ($arg) {\r\n   global $NPDS_Prefix;\r\n   $content='''';\r\n   $arg = arg_filter($arg);\r\n   $result = sql_query("SELECT pollID, pollTitle, voters FROM poll_desc ORDER BY voters DESC LIMIT 0,$arg");\r\n   while (list($pollID, $pollTitle, $voters) = sql_fetch_row($result)) {\r\n      if ($voters>0) {\r\n         $content.=''<li class="ms-4 my-1"><a href="pollBooth.php?op=results&amp;pollID=''.$pollID.''" >''.aff_langue($pollTitle).''</a>&nbsp;<span class="badge bg-secondary float-end">''.wrh($voters).''</span></li>'';\r\n      }\r\n   }\r\n   sql_free_result($result);\r\n   return($content);\r\n}', 'meta', '-', '', '[french]Affiche le titre et un lien sur les Top x des sondages / syntaxe : top_polls(x)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('top_storie_authors', 'function MM_top_storie_authors ($arg) {\r\n   global $NPDS_Prefix;\r\n   $content='''';\r\n   $arg = arg_filter($arg);\r\n   $result = sql_query("SELECT uname, counter FROM users ORDER BY counter DESC LIMIT 0,$arg");\r\n   while (list($uname, $counter) = sql_fetch_row($result)) {\r\n      if ($counter>0) {\r\n         $content.=''<li class="ms-4 my-1"><a href="user.php?op=userinfo&amp;uname=''.$uname.''" >''.$uname.''</a>&nbsp;<span class="badge bg-secondary float-end">''.wrh($counter).''</span></li>'';\r\n      }\r\n   }\r\n   sql_free_result($result);\r\n   return($content);\r\n}', 'meta', '-', '', '[french]Affiche le titre et un lien sur les Top x des auteurs de news (membres) / syntaxe : top_storie_authors(x)[/french]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('topic_all', 'function MM_topic_all() {\r\n   global $NPDS_Prefix, $tipath;\r\n   $aff='''';\r\n   $aff=''<div class="">'';\r\n   $result = sql_query("SELECT topicid, topicname, topicimage, topictext FROM ".$NPDS_Prefix."topics ORDER BY topicname");\r\n   while(list($topicid, $topicname, $topicimage, $topictext) = sql_fetch_row($result)) {\r\n      $resultn = sql_query("SELECT COUNT(*) AS total FROM ".$NPDS_Prefix."stories WHERE topic=''$topicid''");\r\n      $total_news= sql_fetch_assoc($resultn);\r\n      $aff.=''\r\n      <div class="col-sm-6 col-lg-4 mb-2 griditem px-2">\r\n         <div class="card my-2">'';\r\n      if ((($topicimage) or ($topicimage!='''')) and (file_exists("$tipath$topicimage")))\r\n         $aff.=''\r\n         <img class="mt-3 ms-3 n-sujetsize" src="''.$tipath.$topicimage.''" alt="topic_icon" />'';\r\n      $aff.=''\r\n            <div class="card-body">'';\r\n      if($total_news[''total'']!=''0'')\r\n         $aff.=''\r\n               <a href="index.php?op=newtopic&amp;topic=''.$topicid.''"><h4 class="card-title">''.aff_langue($topicname).''</h4></a>'';\r\n      else\r\n         $aff.=''\r\n               <h4 class="card-title">''.aff_langue($topicname).''</h4>'';\r\n      $aff.=''\r\n               <p class="card-text">''.aff_langue($topictext).''</p>\r\n               <p class="card-text text-end"><span class="small">''.translate("Nb. d''articles").''</span> <span class="badge bg-secondary">''.$total_news[''total''].''</span></p>\r\n            </div>'';\r\n      $aff.=''\r\n         </div>\r\n      </div>'';\r\n   }\r\n   $aff.=''\r\n      </div>'';\r\n   sql_free_result($result);\r\n   return ($aff);\r\n}', 'meta', '-', '', '[french]Affiche les sujets avec leurs images.<br />Syntaxe : topic_all()[/french][english]...[/english]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('topic_subscribeOFF', 'function MM_topic_subscribeOFF() {\r\n   $aff= ''<div class="mb-3 row"><input type="hidden" name="op" value="maj_subscribe" />'';\r\n   $aff.=''<button class="btn btn-primary ms-3" type="submit" name="ok">''.translate("Valider").''</button>'';\r\n   $aff.=''</div></fieldset></form>'';\r\n   return ($aff);\r\n}', 'meta', '-', '', '[french]Ferme la FORM de gestion des abonnements (attention a l''imbrication de FORM)[/french][english]...[/english]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('topic_subscribe', 'function MM_topic_subscribe($arg) {\r\n   global $NPDS_Prefix, $subscribe, $user, $cookie;\r\n   $segment = arg_filter($arg);\r\n   $aff='''';\r\n   if ($subscribe) {\r\n      if ($user) {\r\n         $aff=''\r\n         <div class="mb-3 row">'';\r\n         $result = sql_query("SELECT topicid, topictext, topicname FROM ".$NPDS_Prefix."topics ORDER BY topicname");\r\n         while(list($topicid, $topictext, $topicname) = sql_fetch_row($result)) {\r\n            $resultX = sql_query("SELECT topicid FROM ".$NPDS_Prefix."subscribe WHERE uid=''$cookie[0]'' AND topicid=''$topicid''");\r\n            if (sql_num_rows($resultX)=="1")\r\n               $checked=''checked'';\r\n            else\r\n               $checked='''';\r\n            $aff.=''\r\n               <div class="''.$segment.''">\r\n                  <div class="form-check">\r\n                     <input type="checkbox" class="form-check-input" name="Subtopicid[''.$topicid.'']" id="subtopicid''.$topicid.''" ''.$checked.'' />\r\n                     <label class="form-check-label" for="subtopicid''.$topicid.''">''.aff_langue($topicname).''</label>\r\n                  </div>\r\n               </div>'';\r\n         }\r\n         $aff.=''</div>'';\r\n         sql_free_result($result);\r\n      }\r\n   }\r\n   return ($aff);\r\n}', 'meta', '-', '', '[french]Affiche les noms des sujets avec la situation de l''abonnement du membre. Permet au membre de g&eacute;rer ces abonnements (aux sujets).\r\nSyntaxe : topic_subscribe(X) ou X indique le niveau de rupture dans la liste[/french][english]...[/english]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('yt_video', 'function MM_yt_video($id_yt_video) {\r\n   $content='''';\r\n   $id_yt_video = arg_filter($id_yt_video);\r\n   if(!defined(''CITRON''))\r\n      $content .=''\r\n      <div class="ratio ratio-16x9">\r\n         <iframe src="https://www.youtube.com/embed/''.$id_yt_video.''" allowfullscreen="" frameborder="0"></iframe>\r\n      </div>'';\r\n   else\r\n      $content .=''<div class="youtube_player" videoID="''.$id_yt_video.''"></div>'';\r\n   return ($content);\r\n}', 'meta', '-', '', '[french]Inclusion video Youtube. Syntaxe : yt_video(ID de la vid&eacute;o)[/french][english]Include a Youtube video. Syntax : yt_video(video ID)[/english][chinese]&#x5305;&#x542B;Youtube&#x89C6;&#x9891;&#x3002;&#x53E5;&#x6CD5; : yt_video(&#x89C6;&#x9891; ID)[/chinese][spanish]Incluye un video de Youtube. Sintaxis : yt_video(video ID)[/spanish][german]F&uuml;gen Sie ein Youtube-Video hinzu. Syntax : yt_video(video ID)[/german]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('vm_video', 'function MM_vm_video($id_vm_video) {\r\n   $content='''';\r\n   $id_vm_video = arg_filter($id_vm_video);\r\n   if(!defined(''CITRON''))\r\n      $content .=''\r\n      <div class="ratio ratio-16x9">\r\n         <iframe src="https://player.vimeo.com/video/''.$id_vm_video.''" allowfullscreen="" frameborder="0"></iframe>\r\n      </div>'';\r\n   else\r\n      $content .=''<div class="vimeo_player" videoID="''.$id_vm_video.''"></div>'';\r\n   return ($content);\r\n}', 'meta', '-', '', '[french]Inclusion video Vimeo. Syntaxe : vm_video(ID de la vid&eacute;o)[/french][english]Include a Vimeo video. Syntax : vm_video(video ID)[/english][chinese]&#x5305;&#x542B;Vimeo&#x89C6;&#x9891;&#x3002;&#x53E5;&#x6CD5; : vm_video(&#x89C6;&#x9891; ID)[/chinese][spanish]Incluye un video de Vimeo. Sintaxis : vm_video(video ID)[/spanish][german]F&uuml;gen Sie ein Vimeo-Video hinzu. Syntax : vm_video(video ID)[/german]', '1');
INSERT INTO metalang (def, content, type_meta, type_uri, uri, description, obligatoire) VALUES('dm_video', 'function MM_dm_video($id_dm_video) {\r\n   $content='''';\r\n   $id_dm_video = arg_filter($id_dm_video);\r\n   if(!defined(''CITRON''))\r\n      $content .=''\r\n      <div class="ratio ratio-16x9">\r\n         <iframe src="https://www.dailymotion.com/embed/video/''.$id_dm_video.''" allowfullscreen="" frameborder="0"></iframe>\r\n      </div>'';\r\n   else\r\n      $content .=''<div class="dailymotion_player" videoID="''.$id_dm_video.''"></div>'';\r\n   return ($content);\r\n}\r\n', 'meta', '-', NULL, '[french]Inclusion video Dailymotion. Syntaxe : dm_video(ID de la vid&eacute;o)[/french][english]Include a Dailymotion video. Syntax : dm_video(video ID)[/english][chinese]&#x5305;&#x542B;Dailymotion&#x89C6;&#x9891;&#x3002;&#x53E5;&#x6CD5; : dm_video(&#x89C6;&#x9891; ID)[/chinese][spanish]Incluye un video de Dailymotion. Sintaxis : dm_video(video ID)[/spanish][german]F&uuml;gen Sie ein Dailymotion-Video hinzu. Syntax : dm_video(video ID)[/german]\r\n', '1');
